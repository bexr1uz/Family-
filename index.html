<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Family</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background: #f5f7fa;
            margin: 30px;
        }

        h2 {
            text-align: center;
        }

        .box {
            display: inline-block;
            padding: 15px;
            border-radius: 10px;
            background: #ffffff;
            box-shadow: 0 4px 10px rgba(0,0,0,0.08);
            margin: 25px;
           
        }

        .box input {
            padding: 6px 10px;
            margin: 5px 0;
            border-radius: 6px;
            border: 1px solid #ccc;
            outline: none;
            width: 200px;
        }

        .box button {
            padding: 6px 12px;
            border: none;
            border-radius: 6px;
            background: #2196f3;
            color: white;
            cursor: pointer;
            margin-left: 5px;
        }

        .box button:hover {
            background: #1976d2;
        }

        #tree {
            margin-top: 20px;
            padding: 10px;
        }

        .node {
            margin-left: 40px;
            margin-top: 10px;
        }

        .person {
            font-weight: bold;
            padding: 5px 10px;
            background: #e7f6ff;
            border: 1px solid #9ac9ff;
            border-radius: 6px;
            display: inline-block;
        }

        .delBtn {
            margin-left: 10px;
            padding: 2px 6px;
            font-size: 12px;
            background: #ff6b6b;
            color: white;
            border: none;
            border-radius: 10px;
            cursor: pointer;
        }

        #result {
            margin-top: 8px;
            font-weight: bold;
        }
    </style>
</head>
<body>

<h2>Oila daraxti</h2>

<div class="box">
    <input type="text" id="childName" placeholder="Ismni kiriting"><br>
    <input type="text" id="parentName" placeholder="Otasini kiriting (ixtiyoriy)"><br>
    <button onclick="addElement()" style="margin-left: 65px;">Kiritish</button>
</div>

<div class="box">
    <input type="text" id="searchName" placeholder="Qidirish uchun ism"><br><br>
    <button onclick="searchPerson()" style="margin-left: 70px;">Qidirish</button>
    <p id="result"></p>
</div>

<div id="tree"></div>

<script>
let lists = [
    {name: "Bakdurdi Matyoqubov", father: null},
    {name: "Faxriddin Matyoqubov", father: "Bakdurdi Matyoqubov"},
    {name: "Bexruz Bekdurdiyev", father: "Faxriddin Matyoqubov"},
];

function deletePerson(name) {
    lists = lists.filter(p => p.name !== name && p.father !== name);
    renderTree();
}

function renderTree() {
    const container = document.getElementById("tree");
    container.innerHTML = "";
    treeLists(null, container);
}

function treeLists(father, container) {
    lists
        .filter(item => item.father === father)
        .forEach(person => {
            let node = document.createElement("div");
            node.className = "node";

            node.innerHTML = `
                <div class="person">
                    ${person.name}
                    <button class="delBtn" onclick="deletePerson('${person.name}')">x</button>
                </div>
            `;

            container.appendChild(node);
            treeLists(person.name, node);
        });
}

function addElement() {
    let name = document.getElementById("childName").value.trim();
    let father = document.getElementById("parentName").value.trim();

    if (!name) {
        alert("Ismni kiriting!");
        return;
    }

    lists.push({
        name: name,
        father: father || null
    });

    document.getElementById("childName").value = "";
    document.getElementById("parentName").value = "";

    renderTree();
}

function searchPerson() {
    let search = document.getElementById("searchName").value.trim();

    if (!search) {
        alert("Ism kiriting!");
        return;
    }

    const names = lists.map(person => person.name);
    let position = names.indexOf(search);

    if (position !== -1) {
        document.getElementById("result").innerText =
            search + " " + (position + 1) + "-oâ€˜rinda joylashgan";
    } else {
        document.getElementById("result").innerText =
            "Bunday ism topilmadi!";
    }

    document.getElementById("searchName").value = "";
}

renderTree();
</script>

</body>
</html>
